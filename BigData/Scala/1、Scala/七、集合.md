# ä¸€ã€ç®€ä»‹

> Scalaçš„é›†åˆæœ‰ä¸‰å¤§ç±»ï¼šåºåˆ—Seqã€é›†Setã€æ˜ å°„Mapï¼Œæ‰€æœ‰çš„é›†åˆéƒ½æ‰©å±•è‡ªIterableç‰¹è´¨ã€‚å¯¹äºå‡ ä¹æ‰€æœ‰çš„é›†åˆç±»ï¼ŒScalaéƒ½åŒæ—¶æä¾›äº†å¯å˜å’Œä¸å¯å˜çš„ç‰ˆæœ¬ã€‚

- **ä¸å¯å˜é›†åˆ**
  - `scala.collection.immutable`
  - Scala ä¸å¯å˜é›†åˆï¼Œå°±æ˜¯æŒ‡è¯¥é›†åˆå¯¹è±¡ä¸å¯ä¿®æ”¹ï¼Œæ¯æ¬¡ä¿®æ”¹å°±ä¼š==è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡==ï¼Œè€Œ ä¸ä¼šå¯¹åŸå¯¹è±¡è¿›è¡Œä¿®æ”¹ã€‚ç±»ä¼¼äº java ä¸­çš„ String å¯¹è±¡
- **å¯å˜é›†åˆ**
  - `scala.collection.mutable`
  - å¯å˜é›†åˆï¼Œå°±æ˜¯è¿™ä¸ªé›†åˆå¯ä»¥ç›´æ¥å¯¹åŸå¯¹è±¡è¿›è¡Œä¿®æ”¹ï¼Œè€Œ==ä¸ä¼šè¿”å›æ–°çš„å¯¹è±¡==ã€‚ç±»ä¼¼ äº java ä¸­ StringBuilder å¯¹è±¡



==åœ¨æ“ä½œé›†åˆçš„æ—¶å€™ï¼Œä¸å¯å˜ç”¨ç¬¦å·ï¼Œå¯å˜ç”¨æ–¹æ³•==



- **ç»§æ‰¿å›¾**

  - **ä¸å¯å˜é›†åˆ**

    ![Immutable collection hierarchy](../image/collections-immutable-diagram-213.svg)

    | åŒºåˆ«       |                                                              |
    | ---------- | ------------------------------------------------------------ |
    | IndexedSeq | æ˜¯é€šè¿‡ç´¢å¼•æ¥æŸ¥æ‰¾å’Œå®šä½ï¼Œå› æ­¤é€Ÿåº¦å¿«ï¼Œæ¯”å¦‚ String å°±æ˜¯ä¸€ä¸ªç´¢å¼•é›†åˆï¼Œé€šè¿‡ç´¢å¼•å³å¯å®šä½ |
    | LinearSeq  | æ˜¯çº¿å‹çš„ï¼Œå³æœ‰å¤´å°¾çš„æ¦‚å¿µï¼Œè¿™ç§æ•°æ®ç»“æ„ä¸€èˆ¬æ˜¯é€šè¿‡éå†æ¥æŸ¥æ‰¾   |

  

  - **å¯å˜é›†åˆ**

    ![Mutable collection hierarchy](../image/collections-mutable-diagram.svg)







# äºŒã€æ•°ç»„



## ä¸å¯å˜æ•°ç»„

- **è¯­æ³•**

  â€‹											ğŸ‘‡æ•°æ®ç±»å‹	

  `val arr1 = new Array[Int](10)`

  â€‹													  ğŸ‘†æ•°æ®é•¿åº¦ ç¡®å®šåä¸åœ¨æ”¹å˜



```scala
package chapter07

//                 ä¸å¯å˜æ•°ç»„

object Test01_ImmutableArray {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»ºæ•°ç»„
    val arr:Array[Int]=new Array[Int](6)
    // å¦ä¸€ç§åˆ›å»ºæ–¹å¼
    val arr2=Array(20,63,914,33,66,14)


    // 2 è®¿é—®å…ƒç´ 
    println(arr(0))
    println(arr(4))
    println(arr(5))

    // æ³¨æ„ä¸è¦è¶Šç•Œ

    arr(0)=12
    arr(3)=15
    println(arr(0))
    println(arr(3))
println("==============================")

    //3 æ•°ç»„çš„éå†
    //  1)  æ™®é€šå¾ªç¯
    for (i <- 0 until  arr.length ) {
      println(arr(i))
    }

println("===============================")
    for (i<- arr.indices)println(arr(i))


println("===============================")
    // 2) ç›´æ¥éå†æ‰€æœ‰å…ƒç´  å¢å¼ºforå¾ªç¯
    for (elem <- arr2) println(elem)


    // 3) è¿­ä»£å™¨
    val iter= arr2.iterator
    while (iter.hasNext)println(iter.next())

println("========================")
    // 4) è°ƒç”¨foreach æ–¹æ³•
    arr2.foreach((elem:Int)=>println(elem))
    arr.foreach(println)


    println(arr2.mkString("--"))


println("=========================")
    // 5) æ·»åŠ å…ƒç´ 
    val newArr =arr2.:+(78)
    println(arr2.mkString("--"))
    println(newArr.mkString("--"))

    val newArr2=newArr.+:(39)
    println(newArr2.mkString("--"))

    val newArr3=newArr2 :+ 16
//    val newArr4=newArr3 +: 66   error
//    Scalaç‰¹æ€§ : ç”¨ç©ºæ ¼ä»£æ›¿ç‚¹çš„è¯ å‚æ•°åœ¨å·¦ å¯¹è±¡åœ¨å³
    val newArr4 =15 +: 66 +: newArr3 :+ 66 :+39 // å†’å·æœå¯¹è±¡
    println(newArr4.mkString(", "))


  }
}

```



## å¯å˜æ•°ç»„

- **è¯­æ³•**

  â€‹													ğŸ‘‡ Any è¡¨ç¤ºä»»æ„æ•°æ®

  `val arr01 = ArrayBuffer[Any](3, 2, 5)`

â€‹																		ğŸ‘†åˆå§‹åŒ–å…ƒç´ 



==ArrayBuffer éœ€è¦å¼•å…¥ scala.collection.mutable.ArrayBuffer==

```scala
package chapter07

import scala.collection.mutable.ArrayBuffer

object Test02_ArrayBuffer {
  def main(args: Array[String]): Unit = {
   // 1 åˆ›å»ºå¯å˜æ•°ç»„
    val arr1 :ArrayBuffer[Int] =new ArrayBuffer[Int]()
    val arr2 =ArrayBuffer(36,99,38)

    println(arr1.mkString(", "))
    println(arr2)

    // 2 è®¿é—®å…ƒç´ 
//    println(arr1(0))   erroræ•°ç»„è¶Šç•Œ
    println(arr2(1))

    // 3 æ·»åŠ å…ƒç´ 
    arr1 :+ 18   // æ²¡ç”¨   æ˜¯å¯¹ä¸å¯å˜é›†åˆä½¿ç”¨
    val newArr1 = arr1 :+ 18
    println(newArr1)
    println(arr1==newArr1)

println("=============================")

    val newArr2= arr1 += 16
    println(arr1)
    println(newArr2)
    println(arr1==newArr2)
    newArr2 += 19   //  newArr2 æ”¹å˜ arr1ä¹Ÿæ”¹å˜
    println(arr1)


    77 +=: arr1
    println(arr1)
    println(newArr2)

    arr1.append(92)
    arr1.prepend(55,16,95)
    arr1.insert(1,55,36,96)
    println(arr1)

    // è¿½åŠ æ•°ç»„
    arr1.insertAll(2,newArr1)
    arr1.appendAll(newArr2)
    arr1.prependAll(newArr2)


    // 4 åˆ é™¤å…ƒç´ 
    arr1.remove(3)
    println(arr1)

    arr1.remove(0,10)
    println(arr1)

    // åˆ é™¤å…ƒç´ 19
    arr1 -= 19
    println(arr1)
  }
}

```



## ç›¸äº’è½¬æ¢

> ç®€ä»‹

- **arr1.toBuffer**
  - ä¸å¯å˜æ•°ç»„è½¬å¯å˜æ•°ç»„
  - è¿”å›ç»“æœæ‰æ˜¯ä¸€ä¸ªä¸å¯å˜æ•°ç»„ï¼Œarr2 æœ¬èº«æ²¡æœ‰å˜åŒ–
- **arr1.toBuffer**
  - å¯å˜æ•°ç»„è½¬ä¸å¯å˜æ•°ç»„
  - è¿”å›ç»“æœæ‰æ˜¯ä¸€ä¸ªå¯å˜æ•°ç»„ï¼Œarr1 æœ¬èº«æ²¡æœ‰å˜åŒ–



```scala
import scala.collection.mutable
import scala.collection.mutable.ArrayBuffer
object ScalaCollection{
    def main(args: Array[String]): Unit = {
        val buffer = ArrayBuffer(1,2,3,4)
        val array = Array(4,5,6,7)

        // å°†ä¸å¯å˜æ•°ç»„è½¬æ¢ä¸ºå¯å˜æ•°ç»„
        val buffer1: mutable.Buffer[Int] = array.toBuffer
        // å°†å¯å˜æ•°ç»„è½¬æ¢ä¸ºä¸å¯å˜æ•°ç»„
        val array1: Array[Int] = buffer.toArray
    }
}
```



## å¤šç»´æ•°ç»„

- **è¯­æ³•**

  ```scala
  											   ğŸ‘‡ æŒ‡å®šä¸ºäºŒç»´æ•°ç»„
  val array : Array[Array[Int]]= Array.ofDim[Int](2, 3)
  												   ğŸ‘†æ¯ä¸€ç»´åº¦æœ‰ä¸‰ä¸ªå…ƒç´ 		
  ```



```scala
package chapter07

object Test03_MulArray {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»ºäºŒç»´æ•°ç»„
    val array : Array[Array[Int]]= Array.ofDim[Int](2, 3)

    // 2 è®¿é—®å…ƒç´ 
    array(0)(2)=12
    array(1)(0)=15

    println(array.mkString(", "))


    for (i <- 0 until array.length; j<- 0 until array(i).length){
      println(array(i)(j))
    }



    for (i <- array.indices; j<- array(i).indices){
      print(array(i)(j) + "\t")
      if (j==array(i).length-1)  println()
    }

    array.foreach(line => line.foreach(println))
    // ç®€åŒ–
    array.foreach(_.foreach(println))

  }
}

```



# ä¸‰ã€åˆ—è¡¨



## ä¸å¯å˜List

```scala
package chapter07

object Test04_List {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»ºä¸€ä¸ªList
    val list1 =List(12,36,75)
    println(list1)

    //2  è®¿é—®å’Œéå†å…ƒç´ 
    println(list1(2))

    list1.foreach(println)

    //3 æ·»åŠ å…ƒç´ 
    val list2 = 10 +: list1
    val list3 = list1 :+ 16
    println(list1)
    println(list2)
    println(list3)

    println("===================")


    //æŠŠ62 åŠ åœ¨å‰é¢
    val list4 = list2.::(62)
    println(list4)

    // Nil ç”¨äºåˆ›å»ºæ–°åˆ—è¡¨ ç›´è§‚ä¾¿äºç†è§£
    val list5 =Nil.::(11)
    println(list5)

    val list6 =66::32 :: Nil
    val list7 =32 :: 25 ::99 ::15 ::22 ::Nil
    println(list7)


    // 4 åˆå¹¶åˆ—è¡¨

    // ä¸å®Œå…¨åˆå¹¶
    val list8 = list6 :: list7
    println(list8)

    // å®Œå…¨åˆå¹¶  åˆç§°æ‰å¹³åŒ–
    val list9 = list6 ::: list7
    println(list9)

    val list10 = list6 ++ list7
    println(list10)


  }
}

```



[^æ‰å¹³åŒ–]:å°†ä¸€ä¸ªæ•´ä½“æ‹†æˆä¸€ä¸ªä¸€ä¸ªçš„ä¸ªä½“



## å¯å˜Listbuffer

```scala
package chapter07

import scala.collection.mutable.ListBuffer

object Test05_ListBuffer {
  def main(args: Array[String]): Unit = {
//    1 åˆ›å»ºå¯å˜åˆ—è¡¨
    val list1:ListBuffer[Int] = new ListBuffer[Int]()
    val list2 =ListBuffer(15,36,93)

    println(list1)
    println(list2)

println("========================")

    // 2 æ·»åŠ å…ƒç´ 
    list1.append(15,36)
    list2.prepend(62)
    println(list1)
    println(list2)


    list1 += 25 += 17
    11 +=: 88 +=: 69  +=: list1

    // åˆä½“
//    11 +=: 88 +=: 69  +=: list1 += 25 += 17
    println(list1)


    // 3 åˆå¹¶ List
    val list3 =list1 ++ list2
    println(list1)
    println(list2)

    println("===================")

    // list1åé¢è¿½åŠ list2   list2 ä¸å˜
    list1 ++= list2
    println(list1)
    println(list2)

    println("=================")

    //4  ä¿®æ”¹å…ƒç´ 
    list2(3) = 78
//    list2.update(0,66) åº•å±‚å®ç°æ–¹æ³•
    println(list2)

    //5   åˆ é™¤å…ƒç´ 
    list2.remove(2)
    list2 -= 23
    println(list2)

  }

}

```



# å››ã€Seté›†åˆ

==æ³¨æ„ ï¼šScala ä½¿ç”¨çš„æ˜¯ä¸å¯å˜é›†åˆï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨å¯å˜é›†åˆï¼Œéœ€è¦å¼•ç”¨ scala.collection.mutable.Set åŒ…==



## ä¸å¯å˜Set

- Set é»˜è®¤æ˜¯ä¸å¯å˜é›†åˆï¼Œæ•°æ®æ— åº
- æ•°æ®ä¸å¯é‡å¤

```scala
package chapter07

object Test06_ImmutableSet {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»º set
    val set1 = Set(15,63,5,9,1,36,11,26,85,15)
    println(set1)  //ä½¿ç”¨set è¿›è¡Œæ•°æ®å»é‡

println("==============================")
    // 2 æ·»åŠ å…ƒç´ 
    val set2 = set1.+(23)
//  val set2 = set1 + 23
    println(set1)
    println(set2)

    println("==============================")


    // 3 åˆå¹¶set
    val set3 =Set(5,9,1,36)
    val set4 =set2 ++ set3
    println(set2)
    println(set3)
    println(set4)

println("===================================")
    // 4 åˆ é™¤å…ƒç´ 
    val set5 =set3- 1
    println(set3)
    println(set5)

  }
}

```





## å¯å˜mutable.Set

```scala
package chapter07

import scala.collection.mutable

object Test07_MutableSet {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»ºSet
    val set1 :mutable.Set[Int] = mutable.Set(12, 36, 85, 2, 1, 44, 66, 91, 32, 14)
    println(set1)

println("============================")
    // 2 æ·»åŠ å…ƒç´ 
   val set2 =set1 + 11
    println(set1)
    println(set2)

    set1 += 45
    println(set1)


    val flag1 = set1.add(16)
    println(flag1)
    println(set1)

    val flag2 = set1.add(16)
    println(flag2)
    println(set2)

println("===============================")

    // 3 åˆ é™¤å…ƒç´ 
    set2 -= 15
    println(set2)

    val flag3 = set1.remove(16)
    println(flag3)
    println(set2)


    val flag4 = set1.remove(16)
    println(flag4)
    println(set2)

println("=======================")
    // 4  åˆå¹¶ä¸¤ä¸ªset
    val set3 =mutable.Set(25, 8, 3, 64, 62)
    println(set1)
    println(set3)

println("=============================")

    val set4 = set1 ++ set3
    println(set1)
    println(set3)
    println(set4)

    set1 ++= set3
    println(set1)
    println(set3)


  }
}

```



# äº”ã€Mapé›†åˆ

==Scala ä¸­çš„ Map å’Œ Java ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ•£åˆ—è¡¨ï¼Œå®ƒå­˜å‚¨çš„å†…å®¹ä¹Ÿæ˜¯é”®å€¼å¯¹ï¼ˆkey-valueï¼‰ æ˜ å°„==



## ä¸å¯å˜Map

```scala
package chapter07

object Test08_ImmutableMap {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»º Map
    val  map1 : Map[String,Int]= Map("a" -> 12 ,"b" -> 21 ,"hello" -> 52)
    println(map1)
    println(map1.getClass)

println("==============================")
    // 2 éå†å…ƒç´ 
    map1.foreach(println)
    map1.foreach((kv:(String,Int)) => println(kv))

println("==============================")

    //3 å–mapä¸­æ‰€æœ‰çš„key æˆ–è€… value
    for (key <- map1.keys){
      println(s"$key-------> ${map1.get(key)}")
    }


println("==============================")

    //4 è®¿é—®æŸä¸ªå…ƒç´ 
    println(map1.get("a").get)
    println(map1.get("c"))
    // æ²¡æœ‰c çš„value çš„è¯è¿”å›  0
    println("c: " + map1.getOrElse("c",0))
  }

}

```



## å¯å˜Map

```scala
package chapter07

import scala.collection.mutable

object Test09_MutableMap {
  def main(args: Array[String]): Unit = {
    //1 åˆ›å»ºmap
    val  map1 : mutable.Map[String, Int]= mutable.Map("a" -> 12 ,"b" -> 21 ,"hello" -> 52)
    println(map1)
    println(map1.getClass)

    println("===========================")

    //2 æ·»åŠ å…ƒç´ 
    map1.put("c",5)
    map1.put("d",5)
    println(map1)

    map1 += (("e",7))
    println(map1)

    println("===========================")

    //3 åˆ é™¤å…ƒç´ 
    println(map1("c"))
    map1.remove("c")
    println(map1.getOrElse("c",0))

    map1 -= "d"
    println(map1)

    println("===========================")

    // 4 ä¿®æ”¹å…ƒç´ 
    map1.update("c",9)
    map1.update("e",15)

    map1 += (("e",90))
    println(map1)

    println("===========================")


    // 5 åˆå¹¶ä¸¤ä¸ªMap
    val map2 : Map[String,Int]=Map("aaa" -> 15,"b"-> 16 ,"hello"-> 17)
    //map1 ++= map2
    println(map1)
    println(map2)

    println("-----------------------------------")
    val map3: Map[String, Int] = map2 ++ map1  // åé¢çš„mapè¦†ç›–å‰é¢çš„map
    println(map1)
    println(map2)
    println(map3)

  }

}

```



## å…­ã€å…ƒç»„

[^å…ƒç»„]:å°†å¤šä¸ªæ— å…³çš„æ•°æ®å°è£…æˆä¸€ä¸ªæ•´ä½“

```scala
package chapter07

object Test10_Tuple {
  def main(args: Array[String]): Unit = {
    // 1 åˆ›å»ºå…ƒç»„
    val tuple : (String,Int,Char,Boolean)= ("ktj",1,'l',true)
    println(tuple)

    // 2 è®¿é—®æ•°æ®
    println(tuple._1)
    println(tuple._2)
    println(tuple._3)
    println(tuple._4)

    // ä¼ å…¥ç´¢å¼•   å¾—åˆ°å€¼
    println(tuple.productElement(1))
println("----------------------------------------")

    // 3 éå†å…ƒç»„ æ•°æ®
    for (elem <- tuple.productIterator){
      println(elem)
    }

    // 4 åµŒå¥—å…ƒç»„
    val muTuple =(12,36,0.6,"yyy",(56,"sss"),39)
    println(muTuple._5._1)
  }
}

```



# å…­ã€é›†åˆå¸¸ç”¨å‡½æ•°



## åŸºæœ¬å±æ€§å’Œå¸¸ç”¨æ“ä½œ

```scala
package chapter07

object Test11_CommonOp {
  def main(args: Array[String]): Unit = {

    val list = List(25, 16, 3, 9, 15, 36, 14, 22)
    val set = Set(25, 16, 3, 9)


    //    ï¼ˆ1ï¼‰è·å–é›†åˆé•¿åº¦
    println(list)

    //    ï¼ˆ2ï¼‰è·å–é›†åˆå¤§å°
    println(set.size)

    //    ï¼ˆ3ï¼‰å¾ªç¯éå†
    for (elem <- list) {
      println(elem)
    }

    set.foreach(println)

    //    ï¼ˆ4ï¼‰è¿­ä»£å™¨
    for (elem <- list.iterator)  println(elem)


    println("======================")

    //    ï¼ˆ5ï¼‰ç”Ÿæˆå­—ç¬¦ä¸²
    println(list)
    println(set)
    println(list.mkString("--"))

    //    ï¼ˆ6ï¼‰æ˜¯å¦åŒ…å«
    println(list.contains(25))
    println(set.contains(23))


  }
}

```



## è¡ç”Ÿé›†åˆ

```scala
package chapter07

object Test12_DerivedCollection {
  def main(args: Array[String]): Unit = {

    val list1 = List(25, 16, 3, 9, 15, 36, 14, 22,11)
    val list2 = List(25, 16, 3, 9, 99, 62, 58, 12, 66)

    //    ï¼ˆ1ï¼‰è·å–é›†åˆçš„å¤´
    println(list1.head)

    //    ï¼ˆ2ï¼‰è·å–é›†åˆçš„å°¾ï¼ˆä¸æ˜¯å¤´çš„å°±æ˜¯å°¾ï¼‰
    println(list1.tail) // å¾—åˆ°ä¸€ä¸ªæ–°çš„list  é™¤äº†å¤´ä¹‹å¤–éƒ½æ˜¯å°¾

    //    ï¼ˆ3ï¼‰é›†åˆæœ€åä¸€ä¸ªæ•°æ®
    println(list2.last)

    //    ï¼ˆ4ï¼‰é›†åˆåˆå§‹æ•°æ®ï¼ˆä¸åŒ…å«æœ€åä¸€ä¸ªï¼‰
    println(list2.init)

    //    ï¼ˆ5ï¼‰åè½¬
    println(list1.reverse)

    //    ï¼ˆ6ï¼‰å–å‰ï¼ˆåï¼‰n ä¸ªå…ƒç´ 
    println(list1.take(3))
    println(list1.takeRight(4))

    //    ï¼ˆ7ï¼‰å»æ‰å‰ï¼ˆåï¼‰n ä¸ªå…ƒç´ 
    println(list1.drop(3))
    println(list1.dropRight(3))

println("----------------------------------")
    //    ï¼ˆ8ï¼‰å¹¶é›†
    val union =list1.union(list2)
    println("union" + union)
    println(list1 ::: list2 )

          // set åšå¹¶é›†ä¼šå»é‡
    val set1 = Set(25, 16, 3, 9)
    val set2 = Set(9, 99, 62, 58)

    val union2 =set1.union(set2)
    println("union" + union2)
    println(set1 ++ set2)

    //    ï¼ˆ9ï¼‰äº¤é›†
    val intersection =list1.intersect(list2)
    println("intersection" + intersection)

    //    ï¼ˆ10ï¼‰å·®é›†
        // æŸä¸ªé›†åˆç‹¬æœ‰çš„
    val diff1 =list1.diff(list2)
    val diff2 =list2.diff(list1)

    println("diff1 " +diff1)
    println("diff2 " +diff2)

    //    ï¼ˆ11ï¼‰æ‹‰é“¾
    //    çœŸå½¢è±¡
    println("zip1 " +list1.zip(list2))
    println("zip2 " +list2.zip(list1))

println("====================================")
    //    ï¼ˆ12ï¼‰æ»‘çª—
    //    ç»äº† çª—å£å¤§å°ä¸º3

    for (elem <- list1.sliding(3)){
      println(elem)
    }
println("============================")

    for (elem <- list1.sliding(4,2)){
      println(elem)
    }

    // çª—å£å¤§å°å’Œæ»‘åŠ¨è·ç¦»ç›¸åŒ  ä¿è¯æ²¡æœ‰é‡å¤æ•°æ®  åˆå«æ»šåŠ¨çª—å£

    for (elem <- list1.sliding(4,4)){
      println(elem)
    }

  }
}

```



## ç®€å•å‡½æ•°

```scala
package chapter07

object Test13_SimpleFunction {
  def main(args: Array[String]): Unit = {
    val list = List(5, 3, 6, 9, 23, -5, 13)
    val list2 = List(("a",4),("b",9),("c",8),("d",1)
      ,("e",7),("f",0))

    //    ï¼ˆ1ï¼‰æ±‚å’Œ
    var sum = 0
    for (elem <- list) {
      sum += elem
    }
    println(sum)
    println(list.sum)
    println("========================")

    //    ï¼ˆ2ï¼‰æ±‚ä¹˜ç§¯
    println(list.product)
    println("========================")

    //    ï¼ˆ3ï¼‰æœ€å¤§å€¼

    println(list.max)
    println(list2.max)
    println(list2.maxBy((tuple : (String,Int)) => tuple._2 ))
    println(list2.maxBy( _._2 ))   // ç»   å’Œä¸Šé¢ç›¸åŒ

    println("========================")

    //    ï¼ˆ4ï¼‰æœ€å°å€¼
    println(list.min)
    println(list2.minBy( _._2 ))

    println("========================")

    // ï¼ˆ5ï¼‰æ’åº
       // sorted  ä»å°åˆ°å¤§
    val sortedList = list.sorted
    println(sortedList)

    // ä»å¤§åˆ°å°
    println(sortedList.sorted.reverse)

    // ä¼ å…¥éšå¼å‚æ•°  ç›¸å½“äºæŠŠæ’åºè§„åˆ™ä¼ å…¥
    println(list.sorted(Ordering[Int].reverse))

    println(list2.sorted)


    //  sortBy  ä¼ å…¥å‡½æ•° å¯¹list2æŒ‡å®šæ’åºçš„metaå…ƒç´ 
    println(list2.sortBy(_._2))   // é»˜è®¤ä»å°åˆ°å¤§
    println(list2.sortBy(_._2)(Ordering[Int].reverse))


     //  sortWith  æŒ‡å®šæ’åºè§„åˆ™å‡½æ•°
    println(list.sortWith((a:Int , b:Int) =>{a<b} ))

    // å¯¹ä¸Šé¢ç®€åŒ–
    println(list.sortWith( _ < _ ))
    println(list.sortWith( _ > _ ))


  }
}
```



## é«˜çº§å‡½æ•°

### Map

------



```scala
package chapter07

object Test14_HighLevelFunction_Map {
  def main(args: Array[String]): Unit = {
    val list=List(1,2,3,4,5,6,7,8,9)

      // 1 è¿‡æ»¤
    // é€‰å–å¶æ•°
    val evenList = list.filter((elem :Int) => elem % 2 ==0 )
    println(evenList)

    // é€‰å–å¥‡æ•°
    println(list.filter(_ % 2 == 1))

println("==================================")
    // 2 map
    // æŠŠé›†åˆä¸­æ¯ä¸ªæ•°ä¹˜2
    println(list.map( _ * 2))
     // æ‰¾ä¸åˆ°ç‰¹å®šå‡½æ•°åˆ™å†™è¡¨è¾¾å¼    å¹³æ–¹æ“ä½œ
    println(list.map( x => x*x))

    //3 æ‰å¹³åŒ–
    val  nestedList =List(List(1,2,3),List(4,5,6),List(7,8,9))

    val flatList =nestedList(0) ::: nestedList(1) ::: nestedList(2)
    println(flatList)

    val flatList2 =nestedList.flatten
    println(flatList2)

    // 4 æ‰å¹³æ˜ å°„
    // å°†ä¸€ç»„å­—ç¬¦ä¸²è¿›è¡Œåˆ†è¯   å¹¶ä¿å­˜æˆå•è¯åˆ—è¡¨
    val strings = List("hello ryan","hello jack","hello rose","we get")
    val splitList :List[Array[String]]= strings.map(_.split(" "))  // åˆ†è¯
    val flattenList = splitList.flatten  //  æ‰“æ•£åçš„æ‰å¹³åŒ– å…¶å®å°±æ˜¯èšå’Œ åˆ«å½“æœ¯è¯­å¤§å¸ˆ

    println(flattenList)


    //  å…¶å®å°±æ˜¯æ‰“æ•£åçš„å†èšåˆ  è€å¤´å°±æ˜¯å–œæ¬¢è£… æœs
    val flatmapList = strings.flatMap(_.split(" "))

    println("==========================")


    // 5 åˆ†ç»„ groupBy
    //  åˆ†æˆå¥‡æ•°å¶æ•° ä¸¤ç»„
    val groupMap = list.groupBy( _ % 2 )
    val groupMap2: Map[String, List[Int]] = list.groupBy(data => {
      if (data % 2 == 0) "å¶æ•°" else "å¥‡æ•°"
    })

    println(groupMap)
    println(groupMap2)

    // ç»™å®šä¸€ç»„è¯æ±‡  æŒ‰ç…§å•è¯çš„é¦–å­—æ¯è¿›è¡Œåˆ†ç»„
    val wordList = List("china", "america" ,"alice","jack","bob","ryan")
    println(wordList.groupBy(_.charAt(0)))  // 666

  }

}
```

### Reduce

------

```scala
package chapter07

object Test15_HighLevelFunction_Reduce {
  def main(args: Array[String]): Unit = {
    val list =List(1,2,3,4)


    //1 reduce
    println(list.reduce(_ + _))
    println(list.reduceLeft(_ + _))
    println(list.reduceRight(_ + _))

println("======================================")

    val list2 =List(3,4,5,8,10)
    println(list2.reduce(_ - _))  // -24
    println(list2.reduceLeft(_ - _))
    println(list2.reduceRight(_ - _))  // 3 - ( 4 - (5 - (8 - 10)))

println("======================================")

    // 2 fold
    println(list.fold(10)(_+_))  // 10 + 1 + 2 + 3 + 4
    println(list.fold(10)(_-_))  // 10 - 1 - 2 - 3 - 4

    // 3 - (4 -( 5 - ( 8 - ( 10 - 11 )))  æ‰§è¡Œé¡ºåºæœ€é‡Œé¢çš„å…ˆå¼€å§‹
    println(list2.foldRight(11)(_ - _))





  }

}
```



### mergedMap

------

```scala
package chapter07

import scala.collection.mutable

object Test16_MergeMap {
  def main(args: Array[String]): Unit = {
    val map1 =Map("a" -> 1,"b"-> 3 ,"c"->6 )
    val map2 =mutable.Map("a" -> 6,"b"-> 2 ,"c"->9 ,"d"->3)

//    println(map1 ++ map2)


    /*
     fold å’Œ foldLeftçš„åŒºåˆ«
        fold      çš„æ‹¬å·ä¸€å’Œæ‹¬å·äºŒçš„ç±»å‹å¿…é¡»ç›¸åŒ
        foldLeft  çš„æ‹¬å·ä¸€å’Œæ‹¬å·äºŒçš„ç±»å‹ä¸åŒ
     */
    val map3 = map1.foldLeft(map2)(

      //mergedMapå°±æ˜¯map2ï¼Œkvæ˜¯map1çš„å…ƒç´ ï¼ŒæŠŠmap1çš„æ¯ä¸ªå…ƒç´ èåˆåˆ°mergeMapä¸­

      (mergedMap,kv) => {
        val key =kv._1
        val value  =kv._2
        mergedMap(key)  =  mergedMap.getOrElse(key,0) + value
        mergedMap
      }
    )

    println(map3)

  }

}

```





## æ™®é€šWordCountæ¡ˆä¾‹

```scala
package chapter07

object Test17_CommonWordCount {
  def main(args: Array[String]): Unit = {
    val  stringList :List[String] = List(
      "hello",
      "hello world",
      "hello scala",
      "hello spark from scala",
      "hello flink from scala"
    )

    //1 å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ‡åˆ† å¾—åˆ°ä¸€ä¸ªæ‰“æ•£æ‰€æœ‰å•è¯çš„åˆ—è¡¨
//    val wordList1 :List[Array[String]] =stringList.map(_.split(" "))
//    val wordList2 :List[String]=wordList1.flatten
//    println(wordList2)

    // å¯¹ä¸Šé¢ç®€åŒ–
    val wordList =stringList.flatMap(_.split(" "))
    println(wordList)


    // 2 å¯¹ç›¸åŒçš„å•è¯åˆ†ç»„
    val groupMap = wordList.groupBy(word => word)  // æ— æ³•æ”¹ä¸ºä¸‹åˆ’çº¿ ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯
    println(groupMap)    // è¿”å›ä¸€ä¸ªmap æ¯ä¸€ä¸ªè¯ä¸ºkey valueä¸ºè¯çš„å‡ºç°æ¬¡æ•°


    //  3 å¯¹åˆ†ç»„ä¹‹åçš„ list å–é•¿åº¦ å¾—åˆ°æ¯ä¸ªå•è¯çš„å¤§å°
    val countMap = groupMap.map(kv => (kv._1, kv._2.length))


    // 4 å°†mapè½¬æ¢ä¸ºList å¹¶ æ’åºå»å‰ä¸‰

    val  sortList :List[(String,Int)] = countMap.toList
      .sortWith(_._2 > _._2).take(3)

    println(sortList)



  }

}

```



## å¤æ‚WordCountæ¡ˆä¾‹

------

```scala
package chapter07

object Test18_ComplexWordCount {
  def main(args: Array[String]): Unit = {
    val  tupleList :List[(String,Int)] = List(
      ("hello",1),
      ("hello world",2),
      ("hello scala",3),
      ("hello spark from scala",1),
      ("hello flink from scala",2)
    )

    //æ€è·¯1    å±•å¼€ä¸ºæ™®é€šç‰ˆæœ¬
    val  newStringList :List[String] = tupleList.map(
      kv => {
        // trim ç”¨äºå»é™¤å•è¯åçš„ç©ºæ ¼ åé¢åŠ ç©ºæ ¼é˜²æ­¢è¿æ¥åœ¨ä¸€èµ·
        (kv._1.trim+ " ") * kv._2
      }
    )
    println(newStringList)

    // æ¥ä¸‹æ¥åšæ­£å¸¸çš„wordcountæ“ä½œ
    val  wordCountList :List[(String,Int)] =newStringList
      .flatMap(_.split(" "))                     //ç©ºæ ¼åˆ†è¯                 List[String]
      .groupBy( word => word)                           //æŒ‰ç…§å•è¯åˆ†ç»„              Map[String ,List[String]]
      .map( kv => (kv._1 ,kv._2.length))                //ç»Ÿè®¡å‡ºæ¯ä¸ªå•è¯çš„ä¸ªæ•°       Map [String ,Int]
      .toList                                           //è½¬æ¢ä¸ºList               List[(String ,Int)]
      .sortBy(_._2)(Ordering[Int].reverse)              //æ’åº                     List[(String ,Int)]
      .take(3)

   println(wordCountList)

    println("================================")
    //æ€è·¯2  ç›´æ¥åŸºäºäºˆç»Ÿè®¡çš„ç»“æœè¿›è¡Œè½¬æ¢
          // 2.1 å°†å­—ç¬¦ä¸²æ‰“æ•£ä¸ºå•è¯ å¹¶ç»“åˆä¸ºå¯¹åº”çš„ä¸ªæ•°åŒ…è£…æˆäºŒå…ƒç»„
    val preCountList :List[(String,Int)] =tupleList
      .flatMap(
        tuple => {
          val strings :Array[String] = tuple._1.split(" ")
          strings.map( word => (word ,tuple._2))
        }
      )
    println(preCountList)

    // 2.2 å¯¹äºŒå…ƒç»„æŒ‰ç…§å•è¯è¿›è¡Œåˆ†ç»„
    val preCountMap:Map[String , List[(String,Int)]] = preCountList.groupBy(_._1)
    println(preCountMap)


    //2.3 å åŠ æ¯ä¸ªå•è¯äºˆç»Ÿè®¡çš„ä¸ªæ•°å€¼
    val countMap: Map[String,Int] =preCountMap.mapValues(
      tupleList => tupleList.map(_._2).sum
    )

    println(countMap)

    //2.4 è½¬æ¢æˆList æ’åºå–å‰ä¸‰
    val  countList = countMap.toList
      .sortWith(_._2 > _._2)
      .take(3)

    println(countList)


   ğŸŒ¹ // å®ç°å¤æ‚  ä½†æ˜¯æ•ˆç‡é«˜ ğŸŒ¹


  }

}
```



# ä¸ƒã€é˜Ÿåˆ—

==å…ˆè¿›å…ˆå‡º==

```scala
package chapter07

import scala.collection.immutable.Queue
import scala.collection.mutable

object Test19_Queue {
  def main(args: Array[String]): Unit = {
    // åˆ›å»ºä¸€ä¸ªå¯å˜é˜Ÿåˆ—
    val queue =new mutable.Queue[String]()

    queue.enqueue("a","b","c")
    println(queue)
    println(queue.dequeue())
    println(queue)
    println(queue.dequeue())
    println(queue)

    queue.enqueue("d","e")
    println(queue)
    println(queue.dequeue())
    println(queue)

    println("=============================")
    // ä¸å¯å˜é˜Ÿåˆ—
    val queue2 =Queue("a","b","c")
    //    queue2.enqueue("d")   ä¸èµ·ä½œç”¨
    val queue3: Queue[String] = queue2.enqueue("d")
    println(queue2)
    println(queue3)

  }
}
```



[^è¿›é˜Ÿæ–¹æ³•]:enqueue
[^å‡ºé˜Ÿæ–¹æ³•]:dequeue



# å…«ã€å¹¶è¡Œé›†åˆ

> Scala ä¸ºäº†å……åˆ†ä½¿ç”¨å¤šæ ¸ CPUï¼Œæä¾›äº†å¹¶è¡Œé›†åˆï¼ˆæœ‰åˆ«äºå‰é¢çš„ä¸²è¡Œé›†åˆï¼‰ï¼Œç”¨äºå¤šæ ¸ ç¯å¢ƒçš„å¹¶è¡Œè®¡ç®—

```scala
package chapter07

import scala.collection.immutable
import scala.collection.parallel.immutable.ParSeq

object Test20_Parallel {
  def main(args: Array[String]): Unit = {
    val result: immutable.IndexedSeq[Long] = (1 to 100).map(
      x => Thread.currentThread.getId
    )

    println(result)

    val result2: ParSeq[Long] = (1 to 100).par.map(
      x => Thread.currentThread.getId
    )

    println(result2)
  }
}
```































































































































































































