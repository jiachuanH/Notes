# ä¸€ã€é›†ç¾¤å¤–

## åˆ†å‘

```sh
#!/bin/bash

#1. åˆ¤æ–­å‚æ•°ä¸ªæ•°
if [ $# -lt 1 ]
then
    echo Not Enough Arguement!
    exit;
fi

#2. éå†é›†ç¾¤æ‰€æœ‰æœºå™¨
for host in hadoop102 hadoop103 hadoop104
do
    echo ====================  $host  ====================
    #3. éå†æ‰€æœ‰ç›®å½•ï¼ŒæŒ¨ä¸ªå‘é€

    for file in $@
    do
        #4. åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        if [ -e $file ]
            then
                #5. è·å–çˆ¶ç›®å½•
                pdir=$(cd -P $(dirname $file); pwd)

                #6. è·å–å½“å‰æ–‡ä»¶çš„åç§°
                fname=$(basename $file)
                ssh $host "mkdir -p $pdir"
                rsync -av $pdir/$fname $host:$pdir
            else
                echo $file does not exists!
        fi
    done
done

```





## æŸ¥çœ‹è¿›ç¨‹

```sh
#!/bin/bash
for host in hadoop102 hadoop103 hadoop104
do
        echo =============== $host ===============
        ssh $host jps
done
```

## Xcall

```sh
#!/bin/bash

# è·å–æ§åˆ¶å°æŒ‡ä»¤

cmd=$*

# åˆ¤æ–­æŒ‡ä»¤æ˜¯å¦ä¸ºç©º
if [ ! -n "$cmd" ]
then
        echo "command can not be null !"
        exit
fi

# è·å–å½“å‰ç™»å½•ç”¨æˆ·
user=`whoami`

# åœ¨ä»æœºæ‰§è¡ŒæŒ‡ä»¤,è¿™é‡Œéœ€è¦æ ¹æ®ä½ å…·ä½“çš„é›†ç¾¤æƒ…å†µé…ç½®ï¼Œhostä¸å…·ä½“ä¸»æœºåä¸€è‡´ï¼ŒåŒä¸Š
for (( host=2;host<=4;host++ ))
do
        echo "================current host is hadoop10$host================="
        echo "--> excute command \"$cmd\""
        ssh $user@hadoop10$host $cmd
done

echo "excute successfully !"
```


# äºŒã€é›†ç¾¤å†…



## Hadoop å¯åœ

```sh
#!/bin/bash
if [ $# -lt 1 ]
then
        echo "No Args Input..."
        exit ;
fi
case $1 in
        "start")
        echo " =================== å¯åŠ¨ hadoop é›†ç¾¤ ==================="
        echo " --------------- å¯åŠ¨ hdfs ---------------"
        ssh hadoop102 "/opt/module/hadoop-3.3.1/sbin/start-dfs.sh"
        echo " --------------- å¯åŠ¨ yarn ---------------"
        ssh hadoop103 "/opt/module/hadoop-3.3.1/sbin/start-yarn.sh"
        echo " --------------- å¯åŠ¨ historyserver ---------------"
        ssh hadoop102 "/opt/module/hadoop-3.3.1/bin/mapred --daemon start historyserver"
;;
        "stop")
        echo " =================== å…³é—­ hadoop é›†ç¾¤ ==================="
        echo " --------------- å…³é—­ historyserver ---------------"
        ssh hadoop102 "/opt/module/hadoop-3.3.1/bin/mapred --daemon stop historyserver"
        echo " --------------- å…³é—­ yarn ---------------"
        ssh hadoop103 "/opt/module/hadoop-3.3.1/sbin/stop-yarn.sh"
        echo " --------------- å…³é—­ hdfs ---------------"
        ssh hadoop102 "/opt/module/hadoop-3.3.1/sbin/stop-dfs.sh"
;;
*)
        echo "Input Args Error..."
;;
esac
```



## HiveæœåŠ¡

```

```



## Kafkaå¯åœ

```sh
#! /bin/bash

case $1 in
"start"){
    for i in hadoop102 hadoop103 hadoop104
    do
        echo " --------å¯åŠ¨ $i Kafka-------"
        ssh $i "/opt/module/kafka/bin/kafka-server-start.sh -daemon /opt/module/kafka/config/server.properties"
    done
};;
"stop"){
    for i in hadoop102 hadoop103 hadoop104
    do
        echo " --------åœæ­¢ $i Kafka-------"
        ssh $i "/opt/module/kafka/bin/kafka-server-stop.sh "
    done
};;
esac
```



# ä¸‰ã€èµ‹æƒ

```sh
[atguigu@hadoop102 opt]$ cd /home/atguigu
[atguigu@hadoop102 ~]$ mkdir bin
[atguigu@hadoop102 ~]$ cd bin
[atguigu@hadoop102 bin]$ vim ğŸ‘»æ–‡ä»¶åå­—ğŸ‘»
```



```sh
$chmod +x  ğŸ‘»æ–‡ä»¶åå­—ğŸ‘»
```













