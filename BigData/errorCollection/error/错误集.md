

# Sqoop



## ä¸€ã€é”™è¯¯ï¼šæ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±»

- æŠ¥é”™ä¸€

  ```
  é”™è¯¯: æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±» org.apache.hadoop.hbase.util.GetJavaProperty
  ```

- è§£å†³æ–¹æ¡ˆ

  ```sh
  æˆ‘ä»¬éœ€è¦æ”¹ä¸€ä¸‹hbase/bin/ç›®å½•ä¸‹çš„hbaseæ–‡ä»¶
  
  cd /opt/bigdata/hbase/bin
  vi hbase
  
  åˆ‡åˆ°182è¡Œï¼Œåœ¨add_to_cp_if_exists â€œ${HBASE_HOME}/hbase-server/targetâ€ è¿™é‡Œä¸‹é¢åŠ ä¸Šä¸¤è¡Œ
  
          # Needed for GetJavaProperty check below
      add_to_cp_if_exists "${HBASE_HOME}/hbase-server/target/classes"
  
  æŠŠä¸‹é¢å¤§æ¦‚186ï¼Œ187è¡Œçš„
  
  	#add the hbase jars for each module
  	for f in $HBASE_HOME/hbase-jars/hbase*.jar; do
  		if [[ $f = *sources.jar ]]
  	  then
  	    : # Skip sources.jar
  	  elif [ -f $f ]
  	  then
  	    CLASSPATH=${CLASSPATH}:$f;
  	  fi
  	done
  
  è¿™æ®µåˆ æ‰ã€‚
  åˆ‡åˆ°å¤§æ¦‚310è¡Œå·¦å³ï¼Œåœ¨ if [ -n â€œKaTeX parse error: Expected 'EOF', got '&' at position 21: â€¦OP_IN_PATH}" ] &Ì²& [ -f "{HADOOP_IN_PATH}â€ ]; then ä¸‹é¢åŠ ä¸Šä¸€æ®µï¼š
  
    # If built hbase, temporarily add hbase-server*.jar to classpath for GetJavaProperty
    # Exclude hbase-server*-tests.jar
    temporary_cp=
    for f in "${HBASE_HOME}"/lib/hbase-server*.jar; do
      if [[ ! "${f}" =~ ^.*\-tests\.jar$ ]]; then
        temporary_cp=":$f"
      fi
    done
  
  ç„¶åæŠŠ 
  	HADOOP_JAVA_LIBRARY_PATH=(HADOOP_CLASSPATH="(HADOOPCLASSPATH="CLASSPATH" â€œ${HADOOP_IN_PATH}â€ \ 
  æ”¹æˆ
     HADOOP_JAVA_LIBRARY_PATH=$(HADOOP_CLASSPATH="$CLASSPATH${temporary_cp}" "${HADOOP_IN_PATH}" \
  
  ç„¶åwqä¿å­˜é€€å‡ºï¼Œé‡å¯ä¸€ä¸‹hbaseï¼Œå°±å¯ä»¥äº†ã€‚
  å¾ˆå¥½ï¼æˆ‘çŸ¥é“ä½ è‚¯å®šæƒ³åæ§½æˆ‘ä¸çŸ¥é“æˆ‘å†™çš„ä»€ä¹ˆä¸œè¥¿ï¼Œæ‰€ä»¥ä½ å†çœ‹çœ‹ä¸‹é¢é“¾æ¥ä½ å°±æ‡‚äº†ã€‚
  https://reviews.apache.org/r/69299/diff/2/?expand=1
  ç„¶åå†æŸ¥ä¸€ä¸‹ï¼Œæ­£å¸¸äº†ï¼Œå…¶å®æˆ‘iä¹Ÿä¸çŸ¥é“è¿™ä¸ªæŠ¥é”™æœ‰ä»€ä¹ˆå½±å“ï¼Œå› ä¸ºå°±ç®—ä¸æ”¹ï¼Œhbaseå¥½åƒæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„ã€‚
  ```



- æŠ¥é”™äºŒ

  ```
  é”™è¯¯: æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±» org.apache.sqoop.Sqoop
  ```

- è§£å†³æ–¹æ¡ˆ

  ```sh
  sqoop-1.4.x.tar.gzåœ¨1.4.5ä»¥ä¸Šçš„å®‰è£…åŒ…å·²ç»æ²¡æœ‰äº†è¿™ä¸ªjaråŒ…
  å»å®˜ç½‘ä¸‹è½½å¹¶è§£å‹sqoop-1.4.6.bin_hadoop-2.0.4-alpha.tar.gzä¸­çš„sqoop-1.4.6.jar
  å°†å…¶ä¸Šä¼ åˆ°hadoop/share/hadoop/mapreduce/çš„libç›®å½•ä¸‹è§£å†³
  ```

  

## äºŒã€sqoopå‘Hbaseå¯¼å…¥æ•°æ®

- èƒŒæ™¯æè¿°

  > sqoop1.4.6    hbase2.1.0  Hadoop3.1.3

- æŠ¥é”™ä¿¡æ¯

  ```
  Exception in thread "main" java.lang.NoSuchMethodError: org.apache.hadoop.hbase.client.HBaseAdmin.<init>(Lorg/apache/hadoop/conf/Configuration;)V
  ```

- è§£å†³æ–¹æ³•

  ```
  å› ä¸ºhbaseç‰ˆæœ¬å¤ªé«˜å•¦ï¼ŒæŠŠä¸€ä¸ªä½æœ¬çš„hbaseçš„libç›®å½•ä¸‹çš„jaråŒ…ï¼Œå¤åˆ¶åˆ° sqooop/libï¼Œå°±å¯ä»¥äº†
  æˆ‘å¤åˆ¶çš„æ˜¯hbase1.3.1çš„ï¼Œæµ‹è¯•å¯ç”¨
  ```

  



# Hbase



## ä¸€ã€æ— æ³•å¯åŠ¨hbase  

- èƒŒæ™¯æè¿°

  > hbase2.1.0   Hadoop3.3.1  ZKå·²å¯åŠ¨    åå°æ— è¿›ç¨‹ webæ‰“ä¸å¼€

  ```sh
  #æŠ¥é”™ä¿¡æ¯
  ERROR [main] master.HMasterCommandLine: Master exiting
  java.lang.RuntimeException: Failed construction of Master: class org.apache.hadoop.hbase.master.HMaster.
  ```

- è§£å†³ä¸‰å°ç›¸åŒæ“ä½œ

  ```sh
  å°†hbase/lib/client-facing-thirdparty/htrace-core-3.1.0-incubating.jaræ–‡ä»¶æ‹·è´åˆ°/hbase/lib/ä¸‹é¢å³å¯
  
  cp hbase/lib/client-facing-thirdparty/htrace-core-3.1.0-incubating.jar  /hbase/lib/
  ```







## äºŒã€phoenixè¿æ¥hbaseæŠ¥é”™



- èƒŒæ™¯

  > phoenix  hbase2.1.0   Hadoop3.3.1  ZKå·²å¯åŠ¨

- ```sh
  #ç»ˆç«¯æŠ¥é”™ä¿¡æ¯
  Inconsistent namespace mapping properties. Ensure that config phoenix.schema.isName
  ```

- è§£å†³æ–¹æ³•

  ```sh
  å°†hbase/conf/hbase-site.xmlæ‹·è´è‡³ phoenix/bin/hbase-site.xml  æ— éœ€åˆ†å‘
  ```

  

# Azkaban

## ä¸€ã€azkabanæ‰§è¡Œjavaprocessä»»åŠ¡å¤±è´¥

- èƒŒæ™¯

  > azkaban3.84.4    jdk1.8 

- æŠ¥é”™ä¿¡æ¯

  ```
  #ä¸¢å¤± ï¼Œç®€å•æ¦‚æ‹¬
  é›†ç¾¤çš„jdkä¸ºjdk1.8  è€Œæœ¬æœºjdkä¸ºopenjdk18 ä¸¤ä¸ªjdkä¸­çš„jreç‰ˆæœ¬ä¸åŒ 
  æ‰€ä»¥æŠ¥é”™
  ```

- è§£å†³æ–¹æ³•

  ```
  é‡æ–°ä¸‹è½½jdk1.8 é…ç½®åˆ°idea  mavenæ‰“åŒ… 
  ```

  - mavenåœ¨æ‰“åŒ…æ—¶å‘ç”Ÿé”™è¯¯

    ```sh
    #ç»ˆç«¯æŠ¥é”™ä¿¡æ¯
    mavenæ— æ•ˆçš„ç›®æ ‡å‘è¡Œç‰ˆ: 16
    ```

    è§£å†³æ–¹æ³•

    ```sh
    å°†pomæ–‡ä»¶çš„
    <build>   </build>  
    <properties>     </properties>
    åˆ é™¤é‡æ–°æ‰“åŒ…è§£å†³ğŸ§¨
    ```

    

## äºŒã€azkabanæ‰€æœ‰jobéƒ½å¤±è´¥

- èƒŒæ™¯

  > azkaban3.84.4    jdk1.8     azkabané›†ç¾¤éƒ¨ç½²  3å°exec  1å° web

- æŠ¥é”™ä¿¡æ¯

  ```
  azkaban.utils.UndefinedPropertyException: Missing required property'azkaban.native.lib'  ğŸ‘ˆ
  	at azkaban.utils.Props.getString(Props.java:450)
  	at azkaban.jobExecutor.ProcessJob.run(ProcessJob.java:242)
  	at azkaban.execapp.JobRunner.runJob(JobRunner.java:823)
  	at azkaban.execapp.JobRunner.doRun(JobRunner.java:602)
  	at azkaban.execapp.JobRunner.run(JobRunner.java:563)
  	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
  	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
  	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
  	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
  	at java.lang.Thread.run(Thread.java:748)
  13-04-2022 16:33:54 CST jobA ERROR - Missing required property 'azkaban.native.lib' cause: null  ğŸ‘ˆ
  13-04-2022 16:33:54 CST jobA INFO - Finishing job jobA at 1649838834255 with status FAILED
  ```

- è§£å†³æ–¹æ³•

  ```sh
  å‡ºç°è¿™ä¸ªé”™è¯¯æ—¶ï¼Œ
  æŸ¥çœ‹é€‰é¡¹ 
  $vim /opt/module/azkaban/azkaban-exec/conf/azkaban.properties
  azkaban.jobtype.plugin.dir=plugins/jobtypes
  
  #æ”¹ä¸ºå…¨è·¯å¾„
  azkaban.jobtype.plugin.dir=/opt/module/azkaban/azkaban-exec/plugins/jobtypes
  
  #åœ¨azkaban-exec/plugins/jobtypes ç›®å½•ä¸‹æ·»åŠ commonprivate.propertiesé…ç½®æ–‡ä»¶ï¼Œ
  å†…å®¹ä¸­æ·»åŠ ï¼šazkaban.native.lib=false
  
  
  #åˆ†å‘
  #ä¹‹åå†æ¬¡é‡å¯
  ```

  

# Maxwell



## MySQL

- èƒŒæ™¯

  > maxwell1.29.2åœ¨é…ç½®mysqlbinlogæ—¶  åœ¨/var/lib/mysqlæ²¡æœ‰binlogæ–‡ä»¶ç”Ÿæˆä¸”åœ¨mysqlä¸­log_binä¸ºoff

- è§£å†³æ–¹æ³•

  ```sh
  #æŸ¥çœ‹binlogæ˜¯å¦å¼€å¯
  mysql>show variables like 'log_bin';
  
  ç”±äºåœ¨ä¿®æ”¹/etc/my.cnfæ–‡ä»¶æ—¶å‘ç°ä¸ºåªè¯»æ–‡ä»¶æ— æ³•å†™å…¥é…ç½®ï¼Œ
  æ‰€ä»¥ä¿®æ”¹æƒé™å†™å…¥é…ç½®
  ä½†æ­¤æ–‡ä»¶çš„æƒé™å¦‚æœä¸æ˜¯-r--r--r--åˆ™æ— æ³•æ›´æ–°é…ç½®
  ä¿®æ”¹æƒé™
  chmod a+r my.cnf
  chmod a-wx my.cnf
  æŸ¥çœ‹æƒé™
  sudo ls -l
  
  é‡å¯mysqlå®Œç¾è§£å†³
  sudo systemctl restart mysqld
  ```
  
  







# Mysql



- èƒŒæ™¯

  > Win10 å®‰è£…Mysqlå‹ç¼©ç‰ˆ  å®‰è£…åˆå§‹åŒ–å®Œæ¯•    æ— æ³•è¿æ¥

- æŠ¥é”™ä¿¡æ¯

  ```shell
  ERROR 2003 (HY000): Can't connect to MySQL server on 'localhost' (10061)
  ```

- è§£å†³æ–¹æ³•

  win+R   ğŸ‘‰  è¾“å…¥  `services.msc`     ğŸ‘‰  æ‰¾åˆ°MySQL  ğŸ‘‰  åŒå‡»  ğŸ‘‰  å¯åŠ¨

  ![image-20220430105653859](../image/image-20220430105653859.png)

- ```shell
  #å†æ¬¡åˆå§‹åŒ–å®Œç¾è§£å†³
  ```

  



# Git

- èƒŒæ™¯

  > Git å‘½ä»¤çª—å£ä¸­è¿æ¥ 
  >
  > ```sh
  > $ssh git@github.com
  > ```
  >
  > æŠ¥é”™

- æŠ¥é”™ä¿¡æ¯

  ```sh
  ssh: Could not resolve hostname github.com: Name or service not known
  ```

- è§£å†³æ–¹æ³•

  1ã€é€šè¿‡ [ç‚¹æˆ‘](https://ipaddress.com/website/github.com)  æŸ¥çœ‹GitHubçš„IP

  2ã€è¿›å…¥`C:\Windows\System32\drivers\etc`

  3ã€ä¿®æ”¹Hostæ–‡ä»¶

  ```sh
  æ·»åŠ å¦‚ä¸‹å†…å®¹ğŸ‘‡
  
  140.82.113.4    github.com
  ```

  4ã€ä¿å­˜é€€å‡ºå†æ¬¡æµ‹è¯•å³å¯è¿æ¥



# Spark



## Sql

- èƒŒæ™¯

  > è¿è¡ŒSpark beelineæŠ¥é”™       		zk  hadoop  hiveservices2    sparkThrift Server å·²å¯åŠ¨ 

- æŠ¥é”™ä¿¡æ¯

  ```sh
  Error: Could not open client transport with JDBC Uri: jdbc:hive2://hadoop102:10000: Failed to open new session: java.lang.RuntimeException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.security.authorize.AuthorizationException): User: atguigu is not allowed to impersonate root (state=08S01,code=0)
  Beeline version 2.3.7 by Apache Hive
  ```

- è§£å†³æ–¹æ³•

  1. æ‰¾åˆ°Hadoopçš„ core-site.xml  æ·»åŠ å¦‚ä¸‹å†…å®¹

     ```xml
         <property>
             <name>hadoop.proxyuser.root.hosts</name>
             <value>*</value>
         </property>
     
         <property>
             <name>hadoop.proxyuser.root.groups</name>
             <value>*</value>
         </property>
     ```

  2. é‡å¯Hadoop å®Œç¾è§£å†³















